@page "/admin/users/edituser"
@page "/admin/users/edituser/{id:int}"
@inject IUser<User> UserRepo
@inject NavigationManager NavigationManager
@rendermode InteractiveServer

<h3>EditAdmin</h3>
<EditForm Model="User" OnSubmit="Submit" FormName="EditUser">
    <div>
        <label>Firstname</label>
        <InputText @bind-Value="User.FirstName" placeholder="@User.FirstName"></InputText>
    </div>
    <div>
        <label>Model</label>
        <InputText @bind-Value="User.LastName" placeholder="@User.LastName"></InputText>
    </div>
    <div>
        <label>Description</label>
        <InputText @bind-Value="User.Email" placeholder="@User.Email"></InputText>
    </div>
    <button type="submit">Edit</button>
    <button @onclick="Delete" type="button">Delete</button>
</EditForm>
@code {
    [Parameter]
    public int Id { get; set; }
    [SupplyParameterFromForm]
    public User User { get; set; }
   
    protected override async Task OnInitializedAsync()
    {
        User = await UserRepo.GetByIdAsync(Id);
    }

    public async Task Submit()
    {
        await UserRepo.EditAsync(User);
    }
    async Task Delete()
    {
        await UserRepo.DeleteAsync(User.Id);
        NavigationManager.NavigateTo("admin/Customers");
    }
}
